'use strict';

$(function () {
	$('#nav-menu').sticky({
		topSpacing: 0
	});

	// slider events
	$('.events__list').slick({
		infinite: true,
		slidesToShow: 3,
		slidesToScroll: 1,
		responsive: [
			{
				breakpoint: 820,
				settings: {
					slidesToShow: 2,
				},
			},
			{
				breakpoint: 500,
				settings: {
					slidesToShow: 1,
				},
			}
		],
		prevArrow: $('.events__btn--left'),
		nextArrow: $('.events__btn--right')
	});

	// slider links
	$('.header__links').slick({
		infinite: true,
		slidesToShow: 5,
		slidesToScroll: 1,
		responsive: [
			{
				breakpoint: 790,
				settings: {
					slidesToShow: 4,
				},
			},
			{
				breakpoint: 730,
				settings: {
					slidesToShow: 3,
				},
			},
			{
				breakpoint: 590,
				settings: {
					slidesToShow: 2,
				},
			},
			{
				breakpoint: 435,
				settings: {
					slidesToShow: 1,
				},
			}
		],
		prevArrow: $('.links__btn--left'),
		nextArrow: $('.links__btn--right')
	});

	// feedback form
	$('.feedback__form').on('submit', function (event) {
		event.preventDefault();

		var $form = $(this),
		    url = $form.attr('action'),
		    method = $form.attr('method'),
		    data = $form.serialize(),
		    afterMsg = $form.attr('data-after-msg');

		$form.addClass('.feedback__form--loader');

		$.ajax({ method: method, url: url, data: data }).always(function () {
			$form.removeClass('.feedback__form--loader');
		}).fail(function () {
			alert('Ошибка при отправки формы');
		}).done(function () {
			$form.trigger('reset');

			if (afterMsg) {
				alert(afterMsg);
			}
		});
	});
});
//# sourceMappingURL=main.min.js.map

const burgerBtn = document.querySelector('.header__burger-box');
const burgerMenu = document.querySelector('.mobile-menu-list');
const closeBtn = document.querySelector('.mobile-menu-close-btn');
const body = document.body;
const toHidden = document.querySelector('.biography__more');
const hiddenText = document.querySelector('.biography__hidden');

burgerBtn.addEventListener('click', () => {
	burgerMenu.classList.add('active');
	burgerBtn.classList.add('hide');
	body.classList.add('modal-open');
});

const closeMenu = () => {
	burgerMenu.classList.remove('active');
	burgerBtn.classList.remove('hide');
	body.classList.remove('modal-open');
}

closeBtn.addEventListener('click', () => {
	closeMenu();
});

document.addEventListener('click', (event) => {
	if(
		!event.target.closest('.mobile-menu-list') &&
		!event.target.closest('.header__burger') ||
		event.target.closest('.mobile-menu-item')
	) {
		closeMenu();
	}
});

toHidden.addEventListener('click', () => {
	hiddenText.classList.toggle('show');
	toHidden.innerHTML === 'Читать дальше' ? toHidden.innerHTML = 'Скрыть' : toHidden.innerHTML = 'Читать дальше';
});
